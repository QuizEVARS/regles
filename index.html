<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Quiz Seconde - R√®gles & Pilosit√©</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            min-height: 100vh;
            padding: 10px;
            font-size: 16px;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
            padding: 20px 15px;
            text-align: center;
            color: white;
        }

        .header h1 {
            font-size: 1.8em;
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 1em;
            opacity: 0.9;
            line-height: 1.3;
        }

        .game-content { padding: 20px 15px; }

        .mode-selector {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 25px;
        }

        .mode-btn {
            padding: 18px 20px;
            border: none;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            -webkit-tap-highlight-color: transparent;
        }

        .mode-btn.menstruation {
            background: linear-gradient(135deg, #8e44ad 0%, #9b59b6 100%);
            color: white;
        }

        .mode-btn.poils {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
        }

        .mode-btn:active { transform: scale(0.95); }

        .mode-btn.active {
            transform: scale(1.02);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .question-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px 15px;
            margin-bottom: 15px;
            border-left: 4px solid #3498db;
            display: none;
        }

        .question-card.active {
            display: block;
            animation: slideIn 0.4s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .answers {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .answer {
            padding: 18px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1em;
            background: white;
            min-height: 50px;
            display: flex;
            align-items: center;
            line-height: 1.3;
            -webkit-tap-highlight-color: transparent;
        }

        .answer:active { transform: scale(0.98); background: #f0f8ff; }

        .answer.correct {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }

        .answer.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }

        .explanation {
            margin-top: 20px;
            padding: 15px;
            background: #e8f4f8;
            border-radius: 10px;
            border-left: 4px solid #17a2b8;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: fadeIn 0.4s ease-in;
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .explanation h4 {
            color: #17a2b8;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .explanation p { line-height: 1.4; font-size: 0.95em; }

        .progress {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9em;
            font-weight: 600;
            color: #2c3e50;
        }

        .progress-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2c3e50);
            width: 0%;
            transition: width 0.5s ease;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            margin-top: 25px;
        }

        .nav-btn {
            padding: 15px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.2s ease;
            min-height: 50px;
            flex: 1;
            font-weight: 600;
            -webkit-tap-highlight-color: transparent;
        }

        .nav-btn.prev { background: #6c757d; color: white; }
        .nav-btn.next { background: #3498db; color: white; }

        .nav-btn:active { transform: scale(0.95); }
        .nav-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

        .final-score {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            border-radius: 12px;
            margin: 20px 0;
            display: none;
        }

        .final-score.show { display: block; animation: bounceIn 0.6s ease-out; }

        @keyframes bounceIn {
            0% { opacity: 0; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.05); }
            70% { transform: scale(0.95); }
            100% { transform: scale(1); }
        }

        .final-score h2 { font-size: 1.5em; margin-bottom: 15px; }
        .final-score p { line-height: 1.4; margin-bottom: 20px; }

        .restart-btn {
            background: white;
            color: #2c3e50;
            border: 2px solid white;
            padding: 15px 25px;
            border-radius: 25px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            min-height: 50px;
            -webkit-tap-highlight-color: transparent;
            margin: 6px 4px;
        }

        .restart-btn:active { transform: scale(0.95); background: #2c3e50; color: white; }

        @media (max-width: 480px) {
            body { padding: 5px; font-size: 15px; }
            .header h1 { font-size: 1.6em; }
            .question { font-size: 1.1em; }
            .answer { font-size: 0.95em; padding: 16px 12px; }
            .mode-btn { font-size: 1em; padding: 16px 15px; }
        }

        @media (max-width: 360px) {
            .game-content { padding: 15px 10px; }
            .question { font-size: 1.05em; }
            .answer { font-size: 0.9em; }
        }

        @media (max-height: 500px) and (orientation: landscape) {
            .header { padding: 15px; }
            .header h1 { font-size: 1.4em; margin-bottom: 5px; }
            .subtitle { font-size: 0.9em; }
            .game-content { padding: 15px; }
            .mode-selector { flex-direction: row; }
            .mode-btn { min-height: 50px; font-size: 0.95em; }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>üéØ Quiz üéØ</h1>
        <p class="subtitle">R√®gles & Pilosit√© : D√©m√™lons le vrai du faux !</p>
    </div>

    <div class="game-content">
        <div class="mode-selector">
            <button class="mode-btn menstruation" onclick="selectMode('menstruation')">ü©∏ Menstruations</button>
            <button class="mode-btn poils" onclick="selectMode('poils')">üåø Pilosit√© corporelle</button>
        </div>

        <div class="progress">
            <div class="progress-info">
                <span id="questionCounter">S√©lectionnez un th√®me pour commencer</span>
                <span class="score-display" id="scoreDisplay">Score: 0/0</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <div id="questionsContainer"></div>

        <div class="final-score" id="finalScore">
            <h2 id="finalTitle">R√©sultats</h2>
            <p id="finalMessage"></p>

            <button class="restart-btn" onclick="restartGame()">Recommencer</button>
            <button class="restart-btn" onclick="toggleReview()">Revoir mes r√©ponses</button>

            <div id="reviewContainer" style="display:none; margin-top:20px; text-align:left;"></div>
        </div>

        <div class="navigation">
            <button class="nav-btn prev" id="prevBtn" onclick="previousQuestion()" disabled>‚Üê Pr√©c√©dent</button>
            <button class="nav-btn next" id="nextBtn" onclick="nextQuestion()" disabled>Suivant ‚Üí</button>
        </div>
    </div>
</div>

<script>
    let currentMode = '';
    let currentQuestionIndex = 0;
    let score = 0;
    let questions = [];
    let userAnswers = [];

    const menstruationQuestions = [
        {
            question: "Quel est l'√¢ge moyen des premi√®res r√®gles en France ?",
            answers: ["10 ans", "12-13 ans", "15 ans", "16 ans"],
            correct: 1,
            explanation: "L'√¢ge moyen des premi√®res r√®gles (m√©narche) en France est de 12-13 ans, mais il peut varier de 9 √† 16 ans selon chaque personne. Cette variation est parfaitement normale et d√©pend de facteurs g√©n√©tiques, nutritionnels et environnementaux."
        },
        {
            question: "Combien de temps dure en moyenne un cycle menstruel ?",
            answers: ["21 jours", "28 jours", "35 jours", "Cela varie selon chaque personne"],
            correct: 3,
            explanation: "Un cycle menstruel peut durer entre 21 et 35 jours. Bien que 28 jours soit souvent cit√© comme 'moyenne', il est important de comprendre que chaque corps est unique. L'irr√©gularit√© est courante, surtout pendant l'adolescence."
        },
        {
            question: "Quelle quantit√© de sang est perdue pendant les r√®gles ?",
            answers: ["5-20ml", "30-40ml", "100-200ml", "Plus de 500ml"],
            correct: 1,
            explanation: "En moyenne, 30-40ml de sang sont perdus pendant les r√®gles (soit environ 3-4 cuill√®res √† soupe). Cette quantit√© peut sembler importante mais repr√©sente seulement 1% du sang total du corps. Une perte sup√©rieure √† 80ml est consid√©r√©e comme abondante."
        },
        {
            question: "Parmi ces affirmations sur les r√®gles, laquelle est FAUSSE ?",
            answers: ["On peut faire du sport pendant ses r√®gles", "Les r√®gles sont un processus naturel et sain", "Il faut √©viter de se laver les cheveux pendant ses r√®gles", "On peut nager pendant ses r√®gles avec une protection adapt√©e"],
            correct: 2,
            explanation: "Il n'y a aucune restriction d'hygi√®ne pendant les r√®gles ! On peut se laver les cheveux, prendre des bains, faire du sport... Cette croyance est un mythe sans fondement scientifique. L'hygi√®ne corporelle reste la m√™me pendant les r√®gles."
        },
        {
            question: "Quel est le principal objectif de l'√©ducation menstruelle ?",
            answers: ["Faire honte aux filles", "Informer et d√©stigmatiser", "Limiter les activit√©s", "Cr√©er des tabous"],
            correct: 1,
            explanation: "L'√©ducation menstruelle vise √† informer tous les √©l√®ves (filles ET gar√ßons) pour briser les tabous, lutter contre la stigmatisation et permettre √† chacun¬∑e de vivre cette r√©alit√© corporelle sereinement. C'est un enjeu d'√©galit√© et de sant√© publique."
        },
        {
            question: "Que se passe-t-il pendant la phase d'ovulation ?",
            answers: ["L'ovaire lib√®re un ovule", "L'endom√®tre se d√©tache", "Les hormones s'arr√™tent", "Le cycle recommence"],
            correct: 0,
            explanation: "L'ovulation correspond au moment o√π l'ovaire lib√®re un ovule mature, g√©n√©ralement vers le 14√®me jour d'un cycle de 28 jours. C'est la p√©riode de fertilit√© maximale. L'ovule peut √™tre f√©cond√© pendant environ 24h apr√®s sa lib√©ration."
        },
        {
            question: "Quelle hormone est principalement responsable des r√®gles douloureuses ?",
            answers: ["L'≈ìstrog√®ne", "La progest√©rone", "Les prostaglandines", "L'insuline"],
            correct: 2,
            explanation: "Les prostaglandines sont des substances produites par l'endom√®tre qui provoquent les contractions ut√©rines pour √©vacuer la muqueuse. Un exc√®s de prostaglandines peut causer des douleurs menstruelles intenses (dysm√©norrh√©e)."
        },
        {
            question: "Concernant le syndrome pr√©menstruel (SPM), quelle affirmation est vraie ?",
            answers: ["Il n'existe pas vraiment", "Il touche 80% des personnes menstru√©es", "Il peut √™tre soulag√© par l'alimentation et l'exercice", "Il ne concerne que l'humeur"],
            correct: 2,
            explanation: "Le SPM touche environ 30-40% des personnes menstru√©es et se manifeste par des sympt√¥mes physiques et √©motionnels. Une alimentation √©quilibr√©e, l'exercice r√©gulier, la gestion du stress et parfois un suivi m√©dical peuvent aider √† le soulager."
        }
    ];

    const poilsQuestions = [
        {
            question: "Qu‚Äôest-ce qui explique le mieux la grande diversit√© de pilosit√© entre les personnes ?",
            answers: [
                "Surtout l‚Äôhygi√®ne et la fr√©quence des douches",
                "Principalement la g√©n√©tique et les hormones",
                "Le type de v√™tements port√©s (jeans, leggings, etc.)",
                "Le climat : plus il fait froid, plus on d√©veloppe de poils"
            ],
            correct: 1,
            explanation: "La pilosit√© varie √©norm√©ment d‚Äôune personne √† l‚Äôautre, et c‚Äôest surtout li√© √† la g√©n√©tique et aux hormones (quantit√©, sensibilit√© des follicules, etc.). Il n‚Äôy a pas une ‚Äúnorme‚Äù unique : cette diversit√© est normale."
        },
        {
            question: "Quelle est la fonction principale des poils corporels ?",
            answers: [
                "Ils servent surtout √† √©vacuer la transpiration",
                "Protection et r√©gulation thermique",
                "Ils ont principalement un r√¥le social/esth√©tique",
                "Ils emp√™chent les bact√©ries de se d√©velopper sur la peau"
            ],
            correct: 1,
            explanation: "Les poils corporels ont plusieurs fonctions : protection de la peau contre les frottements, r√©gulation de la temp√©rature corporelle, et pi√©geage des ph√©romones. Ils sont un √©l√©ment naturel et fonctionnel du corps humain."
        },
        {
            question: "Concernant l'√©pilation/rasage, quelle affirmation est vraie ?",
            answers: [
                "C‚Äôest recommand√© m√©dicalement pour √©viter la plupart des infections",
                "Il n‚Äôy a pas d‚Äôobligation g√©n√©rale : c‚Äôest une question de pr√©f√©rence",
                "C‚Äôest obligatoire pour limiter les odeurs corporelles",
                "Il vaut mieux √©viter avant la fin de la pubert√© (sinon les poils repoussent anormalement)"
            ],
            correct: 1,
            explanation: "L'√©pilation ou le rasage est un choix personnel et esth√©tique. Il n'y a aucune obligation d'hygi√®ne √† s'√©piler. Chacun¬∑e est libre de garder ses poils naturels ou de les enlever selon ses pr√©f√©rences."
        },
        {
            question: "Pourquoi y a-t-il souvent plus de pression sociale sur les filles concernant l'√©pilation ?",
            answers: [
                "Parce que les poils f√©minins sont biologiquement plus visibles et plus √©pais",
                "√Ä cause de st√©r√©otypes de genre",
                "Parce que l‚Äô√©pilation r√©duit forc√©ment la transpiration",
                "Parce que les produits d‚Äô√©pilation sont historiquement davantage commercialis√©s pour les femmes"
            ],
            correct: 1,
            explanation: "La pression autour de l‚Äô√©pilation f√©minine vient surtout de st√©r√©otypes de genre et de normes esth√©tiques construites socialement. Le marketing ou les habitudes de consommation en sont plut√¥t une cons√©quence qu‚Äôune cause."
        },
        {
            question: "Quel message est important √† retenir sur la pilosit√© corporelle ?",
            answers: [
                "Un corps sans poils est forc√©ment plus sain",
                "Il n‚Äôexiste pas de norme universelle : chacun¬∑e peut faire ses propres choix concernant son corps",
                "Les poils indiquent un manque d‚Äôhygi√®ne",
                "Il faut suivre les tendances pour √©viter le jugement"
            ],
            correct: 1,
            explanation: "Il n‚Äôexiste pas de mod√®le unique de corps ¬´ normal ¬ª. Avoir des poils ou non rel√®ve d‚Äôun choix personnel, et aucune option n‚Äôest sup√©rieure √† une autre. Le respect des choix et des diff√©rences est essentiel."
        },
        {
            question: "Quelle hormone est principalement responsable de la croissance des poils ?",
            answers: [
                "L‚Äô≈ìstrog√®ne",
                "La testost√©rone",
                "Le cortisol (hormone du stress)",
                "L‚Äôhormone de croissance"
            ],
            correct: 1,
            explanation: "La testost√©rone (pr√©sente chez tous les genres, en quantit√©s diff√©rentes) est l'hormone principale qui stimule la croissance des poils corporels pendant la pubert√©."
        },
        {
            question: "Les poils des aisselles et du pubis ont-ils une fonction sp√©cifique ?",
            answers: [
                "Non : ils sont uniquement un ‚Äúreste‚Äù de l‚Äô√©volution sans r√¥le actuel",
                "Oui, ils prot√®gent des frottements",
                "Oui, ils emp√™chent totalement les odeurs",
                "Oui, ils servent surtout √† refroidir la zone en √©vacuant la chaleur par la transpiration"
            ],
            correct: 1,
            explanation: "Ces poils ont une fonction protectrice : ils r√©duisent les frottements dans ces zones sensibles, et peuvent retenir des signaux chimiques (ph√©romones)."
        },
        {
            question: "Dans l'histoire, comment la pilosit√© f√©minine √©tait-elle per√ßue ?",
            answers: [
                "Toujours consid√©r√©e comme laide, sans exception",
                "Variable selon les √©poques et cultures",
                "Toujours √©pil√©e : c‚Äô√©tait la norme universelle",
                "Consid√©r√©e comme un signe de maladie dans la plupart des soci√©t√©s"
            ],
            correct: 1,
            explanation: "La perception de la pilosit√© f√©minine a √©norm√©ment vari√© selon les √©poques et les cultures. L‚Äôid√©e d‚Äôune obligation d‚Äô√©pilation est relativement r√©cente et n‚Äôest pas universelle."
        }
    ];

    function selectMode(mode) {
        currentMode = mode;
        currentQuestionIndex = 0;
        userAnswers = [];
        score = 0;

        document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
        document.querySelector(`.mode-btn.${mode}`).classList.add('active');

        questions = mode === 'menstruation' ? menstruationQuestions : poilsQuestions;

        document.getElementById('finalScore').classList.remove('show');

        displayQuestion();
        updateProgress();
        updateNavigation();
    }

    function displayQuestion() {
        const container = document.getElementById('questionsContainer');
        const question = questions[currentQuestionIndex];

        container.innerHTML = `
            <div class="question-card active">
                <div class="question">${question.question}</div>
                <div class="answers">
                    ${question.answers.map((answer, index) =>
                        `<div class="answer" onclick="selectAnswer(${index})">${answer}</div>`
                    ).join('')}
                </div>
                <div class="explanation" id="explanation">
                    <h4>üí° Explication :</h4>
                    <p>${question.explanation}</p>
                </div>
            </div>
        `;

        if (userAnswers[currentQuestionIndex] !== undefined) {
            selectAnswer(userAnswers[currentQuestionIndex]);
        }
    }

    function recomputeScore() {
        score = 0;
        for (let i = 0; i < questions.length; i++) {
            if (userAnswers[i] !== undefined && userAnswers[i] === questions[i].correct) {
                score++;
            }
        }
    }

    function selectAnswer(answerIndex) {
        const question = questions[currentQuestionIndex];
        const answers = document.querySelectorAll('.answer');
        const explanation = document.getElementById('explanation');

        userAnswers[currentQuestionIndex] = answerIndex;
        recomputeScore();

        answers.forEach(answer => answer.style.pointerEvents = 'none');

        answers.forEach((answer, index) => {
            if (index === question.correct) {
                answer.classList.add('correct');
            } else if (index === answerIndex && index !== question.correct) {
                answer.classList.add('incorrect');
            }
        });

        explanation.classList.add('show');

        updateNavigation();
        updateProgress();
    }

    function nextQuestion() {
        if (currentQuestionIndex < questions.length - 1) {
            currentQuestionIndex++;
            displayQuestion();
            updateNavigation();
            updateProgress();
        } else {
            showFinalScore();
        }
    }

    function previousQuestion() {
        if (currentQuestionIndex > 0) {
            currentQuestionIndex--;
            displayQuestion();
            updateNavigation();
            updateProgress();
        }
    }

    function updateProgress() {
        if (questions.length === 0) return;

        const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
        document.getElementById('progressFill').style.width = `${progress}%`;
        document.getElementById('questionCounter').textContent = `Question ${currentQuestionIndex + 1}/${questions.length}`;

        const answeredCount = userAnswers.slice(0, currentQuestionIndex + 1).filter(v => v !== undefined).length;
        const correctSoFar = userAnswers.slice(0, currentQuestionIndex + 1).reduce((acc, ans, i) => {
            if (ans !== undefined && ans === questions[i].correct) return acc + 1;
            return acc;
        }, 0);

        document.getElementById('scoreDisplay').textContent = `Score: ${correctSoFar}/${Math.max(1, answeredCount)}`;
    }

    function updateNavigation() {
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');

        prevBtn.disabled = currentQuestionIndex === 0 || questions.length === 0;

        if (questions.length === 0) {
            nextBtn.disabled = true;
            nextBtn.textContent = 'Suivant ‚Üí';
        } else if (userAnswers[currentQuestionIndex] === undefined) {
            nextBtn.disabled = true;
            nextBtn.textContent = 'Suivant ‚Üí';
        } else if (currentQuestionIndex === questions.length - 1) {
            nextBtn.disabled = false;
            nextBtn.textContent = 'Voir le score ‚Üí';
        } else {
            nextBtn.disabled = false;
            nextBtn.textContent = 'Suivant ‚Üí';
        }
    }

    function showFinalScore() {
        recomputeScore();

        const finalScoreEl = document.getElementById('finalScore');
        const finalTitle = document.getElementById('finalTitle');
        const finalMessage = document.getElementById('finalMessage');

        const wrong = questions.length - score;
        const percentage = Math.round((score / questions.length) * 100);

        finalTitle.textContent = (wrong <= 1) ? "üéâ F√©licitations ! üéâ" : "üìä R√©sultats";

        let message = `Tu as obtenu ${score}/${questions.length} (${percentage}%) !<br><br>`;

        if (percentage >= 90) {
            message += "üèÜ Tr√®s solide ! Tu es presque incollable sur le sujet ‚Äî et √ßa aide vraiment √† d√©mystifier ces th√®mes.";
        } else if (percentage >= 75) {
            message += "üåü Tr√®s bien ! Tu ma√Ætrises bien le sujet. Continue √† partager ces infos pour briser les tabous.";
        } else if (percentage >= 50) {
            message += "üëç Bien jou√© ! Tu as de bonnes bases. Quelques r√©visions et tu seras au top.";
        } else if (percentage >= 25) {
            message += "üìö Il y a encore des notions √† approfondir. Ces sujets valent le coup d‚Äô√™tre mieux compris.";
        } else {
            message += "üîç C‚Äôest peut-√™tre nouveau pour toi : parfait pour apprendre, poser des questions et d√©m√™ler les id√©es re√ßues !";
        }

        finalMessage.innerHTML = message;
        finalScoreEl.classList.add('show');

        const review = document.getElementById('reviewContainer');
        review.style.display = 'none';
        review.innerHTML = '';

        document.getElementById('questionsContainer').style.display = 'none';
        document.querySelector('.navigation').style.display = 'none';
    }

    function buildReviewHTML() {
        return questions.map((q, i) => {
            const userIndex = userAnswers[i];
            const userText = (userIndex === undefined) ? "‚Äî (pas de r√©ponse)" : q.answers[userIndex];
            const correctText = q.answers[q.correct];
            const isCorrect = userIndex === q.correct;
            const badge = isCorrect ? "‚úÖ" : "‚ùå";

            return `
                <div style="background: rgba(255,255,255,0.12); padding:12px; border-radius:10px; margin-bottom:10px;">
                    <div style="font-weight:700; margin-bottom:6px;">${badge} Question ${i+1} : ${q.question}</div>
                    <div><strong>Ta r√©ponse :</strong> ${userText}</div>
                    <div><strong>Bonne r√©ponse :</strong> ${correctText}</div>
                    <div style="margin-top:6px; opacity:0.95;"><strong>Explication :</strong> ${q.explanation}</div>
                </div>
            `;
        }).join('');
    }

    function toggleReview() {
        const review = document.getElementById('reviewContainer');
        if (review.style.display === 'none') {
            review.innerHTML = buildReviewHTML();
            review.style.display = 'block';
        } else {
            review.style.display = 'none';
        }
    }

    function restartGame() {
        document.getElementById('finalScore').classList.remove('show');
        document.getElementById('questionsContainer').style.display = 'block';
        document.querySelector('.navigation').style.display = 'flex';

        selectMode(currentMode);
    }

    updateNavigation();

    let lastTouchEnd = 0;
    document.addEventListener('touchend', function (event) {
        const now = (new Date()).getTime();
        if (now - lastTouchEnd <= 300) {
            event.preventDefault();
        }
        lastTouchEnd = now;
    }, false);
</script>
</body>
</html>
